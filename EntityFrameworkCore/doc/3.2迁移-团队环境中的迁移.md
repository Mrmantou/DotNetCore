#### 团队环境中的迁移

在团队环境中处理迁移时，特别要注意模型快照文件。这个文件能够告诉你，你同伴的迁移是否与你的迁移完全合并，或者需要在共享之前通过重新创建迁移类解决冲突。

##### 合并(Merging)

在合并来自同伴的迁移时，可能会在模型快照文件中遇到冲突。如果两边的修改没有关联，合并很简单，而且这两个迁移可以共存。例如，可能在customer实体类型配置中遇到类似于下面的合并冲突：
```csharp
<<<<<<< Mine
b.Property<bool>("Deactivated");
=======
b.Property<int>("LoyaltyPoints");
>>>>>>> Theirs
```

因为两个属性都需要存在于最终的模型中，所以通过添加两个属性来完成合并。在很多情况下，版本控制系统会自动合并这些更改。

```csharp
b.Property<bool>("Deactivated");
b.Property<int>("LoyaltyPoints");
```

在这些情形下，你的迁移和同伴的迁移是相互独立的。由于它们都可以优先应用，所以在与团队共享之前，不需要对迁移做任何额外的修改。

##### 解决冲突(Resolving conflicts)

有时候在合并模型快照模型时，会遇到真正的冲突。例如，你和同伴可能各自重命名了相同的属性：

```csharp
<<<<<<< Mine
b.Property<string>("Username");
=======
b.Property<string>("Alias");
>>>>>>> Theirs
```

如果遇到了这种冲突，通过重新创建你的迁移来解决。按照下面的步骤：
1. 在合并之前终止合并并回滚到工作目录
2. 移除你的迁移(但是保留你的模型修改)
3. 合并你的同伴的更改到你的工作目录
4. 重新添加你的迁移

完成这些后。可以按照正确的顺序进行应用这两个迁移。首先应用它们的迁移，将列重命名为`Alias`，然后将其重命名为`Username`。

你的迁移可以安全地与团队的其他成员共享。